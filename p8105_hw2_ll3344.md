p8105\_hw2\_ll3344
================
Lusha Liang
9/24/2020

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
    ## ✓ tibble  3.0.1     ✓ dplyr   1.0.2
    ## ✓ tidyr   1.1.0     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.5.0

    ## ── Conflicts ────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

## Problem 1

Read in the Mr. Trashwheel dataset.

``` r
trashwheel_df = 
  read_xlsx("./data/trash_wheel.xlsx", 
            sheet = "Mr. Trash Wheel",
            range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

Read in the precipitation data for 2017 and 2018.

``` r
precip_2018 = 
  read_excel(
    "./data/trash_wheel.xlsx",
    sheet = "2018 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip_2017 = 
  read_excel(
    "./data/trash_wheel.xlsx",
    sheet = "2017 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Now combine annual precipitation from 2017 and 2018.

``` r
month_df = 
  tibble(
    month = 1:12,
    month_name = month.name
  )

precip_df = 
  bind_rows(precip_2018, precip_2017) 

precip_df = 
  left_join(precip_df, month_df, by = "month")
```

This dataset contains information from the Mr. Trashwheel trash
collector in Baltimore, Maryland. As trash enters the harbor, the
trashwheel collects that trash, and stores it in a dumpster. The dataset
contains information on year, month, and trash collected, including some
specific kinds of trash (such as sports balls, plastic bottles, and
cigarette butts). There are a total of 344 rows in our final dataset.
Additional data sheets include monthly precipitation data.

  - The total amount of precipitation in 2018 was 70.33 inches.
  - The median number of sports balls in a dumpster in 2017 was 8.

## Problem 2

Read in the NYC transit data.

``` r
transit_df =
  read_csv("./data/transit.csv") %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>%
  mutate(entry = ifelse(entry == "YES", "true", "false"),
         entry = as.logical(entry))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

The NYC transit dataset contains information about characteristics of
entrances and exits of each subway station in NYC. Thus far we have
subsetted a portion of the dataset focusing on subway lines, routes, and
information about entrances. The resulting data set has 1868 rows and
19columns. Currently the data is not tidy in that the route variable
encompasses both route name and route number.

Determine the number of stations using the distinct function.

``` r
distinct_transit_df =
  transit_df %>% 
  distinct(station_name, .keep_all = TRUE)
```

There are 356 distinct stations.

Determine the number of ADA compliant stations using the filter
function.

``` r
ada_station_df =
  distinct_transit_df %>%
  filter(ada == "TRUE")
```

57 stations are ADA compliant.

Determine what proportion of station entrances/exits without vending
allow entrance.

``` r
without_vending_df = 
  transit_df %>% 
  filter(vending == "NO")

without_vending_entry_df =
  transit_df %>%
  filter(vending == "NO", entry == "TRUE")
```

  - The number of station entrances/exits without vending that allow
    entrance is 69.
  - The total number of stations entrances/exits without vending is 183.
  - The proportion of station entrances/exits without vending that allow
    entry out of all stations without vending is 0.3770492.

Reformat data so they are tidier\! More explicitly, reoconfigure the
route variable to two distinct variables, one that contains route number
and one that contains route name.

``` r
tidy_transit_df = 
  distinct_transit_df %>%
  mutate(across(route1:route11, as.character)) %>%
  pivot_longer(
    route1:route11,
    names_to = "route_number",
    names_prefix = "route",
    values_to = "route_name"
  )
```

How many distinct stations serve the A train?

``` r
a_train_df =
  tidy_transit_df %>%
  filter(route_name == "A")
```

48 stations serve the A train. Of the stations that serve the A train,
10 of them are ADA compliant.

## Problem 3
